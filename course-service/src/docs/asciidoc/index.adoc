
= Course Service API Docs
:toc-title: Course-Service API
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 2
:sectlinks:

ifndef::snippets[]
:snippets: ./build/generated-snippets
endif::[]

[[common]]
== 공통 스펙

==== 공통 응답 스펙
include::{snippets}/common-response-rest-docs-test/common-response/common-response-fields.adoc[]

Course-Service 응답메시지는 모두 위와 같은 스펙으로 구성되어 있습니다.

===== code field : 응답 코드 반환값

include::{snippets}/common-response-rest-docs-test/common-response/common-response-fields-code.adoc[]

공통 응답 스펙의 ``code`` 필드에는 위와 같은 값들이 반환될 수 있습니다. +
응답 코드는 ``SUCCESS``인 경우를 제외하고 모두 예외가 발생한 상황입니다.

==== 공통 응답 스펙 - 예외인 경우

include::{snippets}/common-response-rest-docs-test/error-response/common-response-fields-error.adoc[]

예외가 발생한 경우에는 `data` 필드에 위와 같은 형식으로 발생한 예외에 대한 응답이 들어갑니다. +
아래의 예시를 참고해주세요.

include::{snippets}/common-response-rest-docs-test/error-response/response-body.adoc[]

// TODO 문서 수정 필요
===== errorCode field : 예외 응답 코드 반환값

include::{snippets}/common-response-rest-docs-test/error-code/common-response-fields-error-codes.adoc[]

예외 응답 스펙의 ``code`` 필드에는 위와 같은 값들이 반환될 수 있습니다.


= 코스

[[Course-save]]
== 1. 코스 등록

POST /courses

[[Course-save-Normal]]
=== 1) 정상 흐름

==== 요청 예시
다음과 같이, 필수 데이터들을 모두 담아 요청하면, 요청을 성공적으로 처리하고 응답을 반환합니다.

include::{snippets}/course-save/success/http-request.adoc[]

==== 요청 헤더

include::{snippets}/course-save/success/request-headers.adoc[]

==== 요청 파라미터

include::{snippets}/course-save/success/request-parameters.adoc[]
include::{snippets}/course-save/success/request-parts.adoc[]


==== 응답 예시
요청을 성공적으로 처리하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-save/success/http-response.adoc[]

==== 응답 필드
include::{snippets}/course-save/success/response-fields-data.adoc[]


[[Course-save-Error]]
=== 2) 예외

==== 요청 예시
다음과 같이 필수 데이터를 전송하지 않으면 예외가 발생하여 요청이 처리되지 않습니다.

include::{snippets}/course-save/validation-fail/http-request.adoc[]

==== 응답 예시
요청 데이터 검증에 실패하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-save/validation-fail/http-response.adoc[]

==== 응답 필드

include::{snippets}/course-save/validation-fail/response-fields-data.adoc[]


// TODO 좋아요 정보 추가
[[Course-Details]]
== 2. 코스 상세 조회

POST /courses/{courseId}

[[Course-Details-Normal]]
=== 1) 정상 흐름

==== 작성 완료된 코스의 경우

==== 요청 예시

작성이 완료된 코스의 경우, 모든 사용자가 조회할 수 있습니다. +
작성이 완료된 코스 식별값을 경로 파라미터에 담아 요청하면 정상적으로 응답을 반환합니다.

include::{snippets}/course-details/success/http-request.adoc[]

==== 요청 파라미터

include::{snippets}/course-details/success/path-parameters.adoc[]

==== 요청 헤더

include::{snippets}/course-details/success/request-headers.adoc[]

==== 응답 예시
요청을 성공적으로 처리하면 다음과 같은 응답을 반환합니다.
Authorization 헤더가 비어있으면, 로그인 하지 않은 것으로 간주하여
좋아요 식별값을 응답에서 제외합니다.

include::{snippets}/course-details/success/http-response.adoc[]

==== 응답 필드
include::{snippets}/course-details/success/response-fields-data.adoc[]



==== 작성이 완료되지 않은 코스를 작성자가 조회 할 경우

작성이 완료되지 않은 코스의 경우, 해당 코스 작성자만이 조회할 수 있습니다. +
작성자는, 요청시에 인증 헤더에 유효한 AccessToken을 담아 요청해야 합니다.

==== 요청 예시

include::{snippets}/course-details/success-when-not-complete/http-request.adoc[]

==== 요청 헤더

include::{snippets}/course-details/success-when-not-complete/request-headers.adoc[]

==== 응답 예시
요청을 성공적으로 처리하고 다음과 같은 응답을 반환합니다.

include::{snippets}/course-details/success-when-not-complete/http-response.adoc[]

==== 응답 필드
include::{snippets}/course-details/success-when-not-complete/response-fields-data.adoc[]



[[Course-Details-Not-Complete-Error]]
=== 2) 예외

==== 작성이 완료되지 않은 코스를 다른 회원이 조회 할 경우

작성이 완료되지 않은 코스를, 코스 작성자가 아닌 사용자가 조회하려고 하면, 오류가 발생합니다.

==== 요청 예시

include::{snippets}/course-details/fail-not-complete-course-id/http-request.adoc[]

==== 응답 예시
요청 처리에 실패하고, 다음과 같은 응답을 반환합니다.

include::{snippets}/course-details/fail-not-complete-course-id/http-response.adoc[]

==== 응답 필드
include::{snippets}/course-details/fail-not-complete-course-id/response-fields-data.adoc[]


==== 등록되지 않은 코스를 조회할 경우
==== 요청 예시

등록되지 않은 코스를 조회하려고 하면, 오류가 발생합니다.

include::{snippets}/course-details/fail-invalid-course-id/http-request.adoc[]

==== 응답 예시
요청 처리에 실패하고, 다음과 같은 응답을 반환합니다.

include::{snippets}/course-details/fail-invalid-course-id/http-response.adoc[]

==== 응답 필드
include::{snippets}/course-details/fail-invalid-course-id/response-fields-data.adoc[]



[[Course-Like-Save]]
== 3. 코스 좋아요 등록

POST /courses/{courseId}/like

[[Course-Like-Save-Normal]]
=== 1) 정상 흐름

==== 요청 예시

include::{snippets}/course-like-save/success/http-request.adoc[]

==== 요청 경로 파라미터

include::{snippets}/course-like-save/success/path-parameters.adoc[]

==== 요청 헤더

include::{snippets}/course-like-save/success/request-headers.adoc[]


==== 응답 예시
요청을 성공적으로 처리하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-like-save/success/http-response.adoc[]

==== 응답 필드

include::{snippets}/course-like-save/success/response-fields-data.adoc[]

[[Course-Like-Save-Error1]]
=== 2) 예외

==== 이미 해당 코스에 좋아요 한 경우

==== 응답 예시

include::{snippets}/course-like-save/already-saved/http-response.adoc[]


==== 존재하지 않는 코스일 경우

경로 파라미터로 전달된 ``courseId``와 일치하는 코스가 없다면, 다음과 같은 응답을 반환합니다.

==== 응답 예시

include::{snippets}/course-like-save/invalid-course-id/http-response.adoc[]

==== 예외 응답 필드

예외 응답에 사용되는 필드는 다음과 같습니다.

include::{snippets}/course-like-save/invalid-course-id/response-fields-data.adoc[]


[[Course-Like-Remove]]
== 4. 코스 좋아요 삭제

DELETE /courses/{courseId}/like/{courseLikeId}

[[Course-Like-Remove-Normal]]
=== 1) 정상 흐름

==== 요청 예시

include::{snippets}/course-like-remove/success/http-request.adoc[]

==== 요청 경로 파라미터

include::{snippets}/course-like-remove/success/path-parameters.adoc[]

==== 요청 헤더

include::{snippets}/course-like-remove/success/request-headers.adoc[]


==== 응답 예시
요청을 성공적으로 처리하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-like-remove/success/http-response.adoc[]

==== 응답 필드

include::{snippets}/course-like-remove/success/response-fields-data.adoc[]

[[Course-Like-Remove-Error]]
=== 2) 예외

==== 존재하지 않는 좋아요 식별값을 지정한 경우

==== 응답 예시

include::{snippets}/course-like-remove/invalid-like-id/http-response.adoc[]


==== 좋아요가 등록된 코스와, 지정한 코스 식별값이 다른 경우

==== 응답 예시

include::{snippets}/course-like-remove/not-same-course-id/http-response.adoc[]

==== 좋아요를 등록한 유저와 요청한 유저가 다른 경우

==== 응답 예시

include::{snippets}/course-like-remove/not-same-user-id/http-response.adoc[]

==== 예외 응답 필드

예외 응답에 사용되는 필드는 다음과 같습니다.

include::{snippets}/course-like-remove/not-same-user-id/response-fields-data.adoc[]





'''
= 코스 장소

[[Course-Place-Save]]
== 1. 코스 장소 등록

POST /courses/{courseId}/course-place

[[Course-Place-Save-Normal]]
=== 1) 정상 흐름

==== 요청 예시
다음과 같이, 필수 데이터들을 모두 포함하여 요청하면, 요청을 성공적으로 처리하고 응답을 반환합니다.

include::{snippets}/course-place-save/success/http-request.adoc[]

==== 요청 헤더

include::{snippets}/course-place-save/success/request-headers.adoc[]

==== 요청 경로 파라미터

include::{snippets}/course-place-save/success/path-parameters.adoc[]

==== 요청 파라미터

include::{snippets}/course-place-save/success/request-fields.adoc[]

==== 응답 예시
요청을 성공적으로 처리하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-place-save/success/http-response.adoc[]

==== 응답 필드
include::{snippets}/course-place-save/success/response-fields-data.adoc[]


[[Course-Place-Save-Error]]
=== 2) 예외

==== 요청 예시
다음과 같이 필수 데이터를 전송하지 않으면 예외가 발생하여 요청이 처리되지 않습니다.

include::{snippets}/course-place-save/fail/http-request.adoc[]

==== 응답 예시
요청 데이터 검증에 실패하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-place-save/fail/http-response.adoc[]

==== 응답 필드

include::{snippets}/course-place-save/fail/response-fields-data.adoc[]


'''
[[Course-Place-Save-Batch]]
== 2. 코스 장소 리스트 등록

POST /courses/{courseId}/course-place/batch

[[Course-Place-Save-Batch-Normal]]
=== 1) 정상 흐름

==== 요청 예시
다음과 같이, 필수 데이터들을 모두 포함하여 요청하면, 요청을 성공적으로 처리하고 응답을 반환합니다.

include::{snippets}/course-place-save-batch/success/http-request.adoc[]

==== 요청 헤더

include::{snippets}/course-place-save-batch/success/request-headers.adoc[]

==== 요청 경로 파라미터

include::{snippets}/course-place-save-batch/success/path-parameters.adoc[]

==== 요청 파라미터

include::{snippets}/course-place-save-batch/success/request-fields.adoc[]

==== 응답 예시
요청을 성공적으로 처리하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-place-save-batch/success/http-response.adoc[]

==== 응답 필드
include::{snippets}/course-place-save-batch/success/response-fields-data.adoc[]


[[Course-Place-Save-Batch-Error]]
=== 2) 예외

==== 요청 예시 1
다음과 같이 필수 데이터인 장소를 하나도 전송하지 않으면
예외가 발생하여 요청이 처리되지 않습니다.

include::{snippets}/course-place-save-batch/fail-all-field/http-request.adoc[]

==== 응답 예시 1
요청 데이터 검증에 실패하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-place-save-batch/fail-all-field/http-response.adoc[]

==== 요청 예시 2
다음과 같이, 장소 리스트 중 특정 필드를 입력하지 않은 경우,
예외가 발생하여 요청이 처리되지 않습니다.

include::{snippets}/course-place-save-batch/fail-specific-field/http-request.adoc[]

==== 응답 예시 2
요청 데이터 검증에 실패하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-place-save-batch/fail-specific-field/http-response.adoc[]

==== 응답 필드

include::{snippets}/course-place-save-batch/fail-all-field/response-fields-data.adoc[]




'''
[[Course-Place-Detail-List]]
== 3. 코스 장소 리스트 조회

GET /courses/{courseId}/course-place

[[Course-Place-Detail-List-Normal]]
=== 1) 정상 흐름

==== 요청 예시

include::{snippets}/course-place-list/success/http-request.adoc[]

==== 요청 경로 파라미터

include::{snippets}/course-place-list/success/path-parameters.adoc[]


==== 응답 예시
요청을 성공적으로 처리하면 다음과 같은 응답을 반환합니다.

include::{snippets}/course-place-list/success/http-response.adoc[]

==== 응답 필드

include::{snippets}/course-place-list/success/response-fields-data.adoc[]

[[Course-Place-Detail-List-Error1]]
=== 2) 예외

==== 작성 완료되지 않은 코스일 경우

경로 파라미터로 전달된 ``courseId``와 일치하는 코스가, 작성 완료 상태가 아니라면,
다음과 같은 응답을 반환합니다.

==== 응답 예시

include::{snippets}/course-place-list/fail-not-complete-writing/http-response.adoc[]


==== 존재하지 않는 코스일 경우

경로 파라미터로 전달된 ``courseId``와 일치하는 코스가 없다면, 다음과 같은 응답을 반환합니다.

==== 응답 예시

include::{snippets}/course-place-list/fail-not-exist-course-id/http-response.adoc[]

==== 예외 응답 필드

예외 응답에 사용되는 필드는 다음과 같습니다.

include::{snippets}/course-place-list/fail-not-exist-course-id/response-fields-data.adoc[]

